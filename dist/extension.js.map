{"version":3,"sources":[".././client/node_modules/vscode-jsonrpc/lib/cancellation.js",".././client/node_modules/vscode-jsonrpc/lib/events.js",".././client/node_modules/vscode-jsonrpc/lib/is.js",".././client/node_modules/vscode-jsonrpc/lib/linkedMap.js",".././client/node_modules/vscode-jsonrpc/lib/main.js",".././client/node_modules/vscode-jsonrpc/lib/messageReader.js",".././client/node_modules/vscode-jsonrpc/lib/messageWriter.js",".././client/node_modules/vscode-jsonrpc/lib/messages.js",".././client/node_modules/vscode-jsonrpc/lib/pipeSupport.js",".././client/node_modules/vscode-jsonrpc/lib/socketSupport.js",".././client/node_modules/vscode-languageclient/lib/callHierarchy.proposed.js",".././client/node_modules/vscode-languageclient/lib/client.js",".././client/node_modules/vscode-languageclient/lib/codeConverter.js",".././client/node_modules/vscode-languageclient/lib/colorProvider.js",".././client/node_modules/vscode-languageclient/lib/configuration.js",".././client/node_modules/vscode-languageclient/lib/declaration.js",".././client/node_modules/vscode-languageclient/lib/foldingRange.js",".././client/node_modules/vscode-languageclient/lib/implementation.js",".././client/node_modules/vscode-languageclient/lib/main.js",".././client/node_modules/vscode-languageclient/lib/progress.js",".././client/node_modules/vscode-languageclient/lib/progressPart.js",".././client/node_modules/vscode-languageclient/lib/protocolCodeLens.js",".././client/node_modules/vscode-languageclient/lib/protocolCompletionItem.js",".././client/node_modules/vscode-languageclient/lib/protocolConverter.js",".././client/node_modules/vscode-languageclient/lib/protocolDocumentLink.js",".././client/node_modules/vscode-languageclient/lib/selectionRange.js",".././client/node_modules/vscode-languageclient/lib/semanticTokens.proposed.js",".././client/node_modules/vscode-languageclient/lib/typeDefinition.js",".././client/node_modules/vscode-languageclient/lib/utils/async.js",".././client/node_modules/vscode-languageclient/lib/utils/is.js",".././client/node_modules/vscode-languageclient/lib/utils/processes.js",".././client/node_modules/vscode-languageclient/lib/utils/uuid.js",".././client/node_modules/vscode-languageclient/lib/workspaceFolders.js",".././client/node_modules/vscode-languageclient/node_modules/semver/semver.js",".././client/node_modules/vscode-languageserver-protocol/lib/main.js",".././client/node_modules/vscode-languageserver-protocol/lib/messages.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.progress.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././client/node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././client/node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././client/node_modules/vscode-languageserver-types/lib/esm/main.js",".././client/src/extension.ts","../external \"child_process\"","../external \"crypto\"","../external \"fs\"","../external \"net\"","../external \"os\"","../external \"path\"","../external \"vscode\"","../webpack/bootstrap","../webpack/startup","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object"],"names":["Object","defineProperty","exports","value","events_1","Is","CancellationToken","None","freeze","isCancellationRequested","onCancellationRequested","Event","Cancelled","is","candidate","boolean","shortcutEvent","callback","context","handle","setTimeout","bind","clearTimeout","MutableToken","this","_isCancelled","_emitter","fire","undefined","dispose","Emitter","event","CancellationTokenSource","_token","cancel","Disposable","create","func","_disposable","CallbackList","bucket","_callbacks","_contexts","push","Array","isArray","remove","foundCallbackWithDifferentContext","i","len","length","splice","Error","args","ret","callbacks","slice","contexts","apply","e","console","error","_options","_event","listener","thisArgs","disposables","result","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","call","string","String","array","number","Number","stringArray","every","elem","Touch","First","Last","LinkedMap","_map","Map","_head","_tail","_size","clear","key","has","item","get","touch","next","previous","addItemLast","addItemFirst","set","delete","removeItem","callbackfn","thisArg","current","__export","m","p","hasOwnProperty","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","type","ProgressType","NullLogger","warn","info","log","fromString","Off","toLowerCase","Messages","Verbose","toString","JSON","Text","ConnectionError","code","message","super","setPrototypeOf","prototype","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","version","starRequestHandler","starNotificationHandler","timer","tracer","requestHandlers","notificationHandlers","progressHandlers","messageQueue","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","id","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","triggerMessageQueue","size","setImmediate","shift","isRequestMessage","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","traceSendingResponse","write","replyError","data","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","Date","now","cancellationSource","tokenKey","handlerResult","numberOfParams","token","promise","then","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","resolve","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","toCancel","response","queue","addMessageToQueue","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","last","map","Promise","traceSendingRequest","MessageWriteError","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","keys","forEach","listen","AlreadyListening","throwIfListening","inspect","verbose","ConnectionStrategy","createMessageConnection","input","output","read","end","isMessageWriter","DefaultSize","CR","Buffer","from","LF","MessageBuffer","encoding","index","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","Math","ceil","concat","split","header","indexOf","substr","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","on","onData","fireError","fireClose","append","headers","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","parse","firePartialMessage","waitingTime","process","eventEmitter","socket","ContentLength","CRLF","AbstractMessageWriter","count","writable","errorCount","join","sending","doWriteMessage","send","destroy","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","_","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","randomBytes","platform","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","_reject","server","createServer","close","removeListener","onConnected","createServerPipeTransport","createConnection","createClientSocketTransport","port","createServerSocketTransport","vscode_1","vscode_languageserver_protocol_1","client_1","ensure","target","protocol2code","code2protocol","asCallHierarchyItem","converter","CallHierarchyItem","asSymbolKind","kind","name","detail","asUri","uri","asRange","range","selectionRange","tags","asSymbolTags","asCallHierarchyIncomingCall","CallHierarchyIncomingCall","asRanges","fromRanges","asCallHierarchyOutgoingCall","CallHierarchyOutgoingCall","to","asCallHierarchyItems","items","asCallHierarchyIncomingCalls","asCallHierarchyOutgoingCalls","CallHierarchyProvider","client","middleware","clientOptions","document","position","prepareCallHierarchy","code2ProtocolConverter","asTextDocumentPositionParams","Proposed","CallHierarchyPrepareRequest","protocol2CodeConverter","logFailedRequest","provideCallHierarchyIncomingCalls","CallHierarchyIncomingCallsRequest","provideCallHierarchyOutgoingCalls","CallHierarchyOutgoingCallsRequest","provideCallHierarchyOutgingCalls","CallHierarchyFeature","TextDocumentFeature","cap","dynamicRegistration","documentSelector","capabilities","options","getRegistration","callHierarchyProvider","register","messages","registerOptions","_client","provider","languages","registerCallHierarchyProvider","c2p","p2c","async_1","UUID","progressPart_1","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","restarts","_error","Continue","Shutdown","Restart","window","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","DynamicFeature","unregister","DocumentNotifiactions","_middleware","_createParams","_selectorFilter","_selectors","selectors","textDocument","selector","match","_listener","values","notificationSent","_data","DidOpenTextDocumentFeature","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","didOpen","asOpenTextDocumentParams","textDocumentFilter","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","_registrations","registration","registerLanguageProvider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","WorkDoneProgressOptions","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","tagSupport","valueSet","CompletionItemTag","Deprecated","completionItemKind","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","asCompletionParams","asCompletionResult","provideCompletionItem","resolveCompletionItem","resolveProvider","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","provideSignatureHelp","providerSignatureHelp","asSignatureHelpParams","asSignatureHelp","retriggerCharacters","registerSignatureHelpProvider","metaData","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","provideReferences","_providerReferences","asReferenceParams","asReferences","registerReferenceProvider","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","_provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","_provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","isPreferredSupport","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","_provideCodeActions","asTextDocumentIdentifier","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","provideOnTypeFormattingEdits","ch","asPosition","moreTriggerCharacter","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkCapabilities","tooltipSupport","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","some","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","path","obj","workspaceFolder","getConfiguration","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","executeCommand","command","arguments","commands","registerCommand","MessageTransports","reader","writer","OnReady","_resolve","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_providers","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","stack","showNotification","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","clientInfo","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","done","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","shutdown","exit","cleanUpChannel","channel","diagnostics","_a","_b","didChangeWatchedFile","didChangeWatchedFiles","changes","workSpaceMiddleware","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","createProtocolConnection","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","start","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","request","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","versionSupport","DiagnosticTag","Unnecessary","fillClientCapabilities","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","asPromise","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asCompletionTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","asSignatureHelpTriggerKind","SignatureHelpTriggerKind","Invoke","ContentChange","asParameterInformation","label","asSignatureInformation","parameters","asWorkerPosition","line","character","inserting","replacing","isInsertReplace","asLocation","Location","asDiagnosticSeverity","DiagnosticSeverity","Information","Hint","asDiagnosticTag","tag","asRelatedInformation","location","asDiagnostic","Diagnostic","severity","converted","asDiagnosticTags","asCompletionItemTag","asTextEdit","newText","asSymbolTag","languageId","text","getText","arg","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","isRetrigger","activeSignatureHelp","signatures","activeSignature","activeParameter","asPositions","protocolItem","default","original","documentation","format","asDocumentation","filterText","InsertTextFormat","textEdit","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","additionalTextEdits","commitCharacters","preselect","asCompletionItemTags","deprecated","includeDeclaration","only","CodeActionContext","CodeLens","tabSize","insertSpaces","DocumentLink","tooltip","ColorProviderFeature","DocumentColorRequest","colorProvider","provideColorPresentations","color","requestParams","ColorPresentationRequest","asColorPresentations","provideDocumentColors","asColorInformations","registerColorProvider","red","green","blue","alpha","colorInformation","ci","ColorInformation","asColor","colorPresentations","cp","presentation","ColorPresentation","configuration","ConfigurationRequest","scopeUri","lastIndexOf","DeclarationFeature","DeclarationRequest","declarationSupport","declarationProvider","provideDeclaration","asDeclarationResult","registerDeclarationProvider","FoldingRangeFeature","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","asFoldingRanges","registerFoldingRangeProvider","FoldingRangeKind","Comment","Imports","Region","foldingRanges","r","FoldingRange","startLine","endLine","asFoldingRangeKind","ImplementationFeature","ImplementationRequest","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","fs","SemVer","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","selectionRange_1","progress_1","callHierarchy_proposed_1","semanticTokens_proposed_1","processes_1","Executable","TransportKind","Transport","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","isSocket","module","detached","LanguageClient","arg1","arg2","arg3","arg4","arg5","serverOptions","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","prerelease","satisfies","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","kill","terminate","getEnvironment","env","fork","debugStartWith","debugEquals","assertStdio","stdin","stdout","stderr","runDebug","run","debug","execArgv","startsWith","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","node","transport","stdio","runtime","ipc","pipe","cwd","silent","sp","protocol","execOptions","serverProcess","spawn","registerFeatures","createAll","TypeDefinitionFeature","WorkspaceFoldersFeature","SelectionRangeFeature","ProgressFeature","_mainGetRootPath","s","lstat","err","stats","isDirectory","SettingMonitor","_setting","primary","rest","enabled","needsStart","SemanticTokensFeature","WorkDoneProgressCreateRequest","_reported","WorkDoneProgress","begin","report","cancellable","ProgressLocation","Notification","Window","withProgress","async","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","WorkDoneProgressCancelNotification","max","min","delta","increment","ProtocolCodeLens","ProtocolCompletionItem","CompletionItem","ls","CodeBlock","language","diagnostic","asDiagnosticRelatedInformation","information","DiagnosticRelatedInformation","Position","MarkdownString","asCompletionInsertText","itemKind","TextEdit","asSignatureInformations","SignatureInformation","asParameterInformations","ParameterInformation","asLocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","asLocationResult","LocationLink","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolInformation","SymbolInformation","containerName","asDocumentSymbol","children","child","kindMapping","asCodeActionKind","parts","WorkspaceEdit","CreateFile","createFile","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","asColorInformation","asColorPresentation","asFoldingRange","asSelectionRange","SelectionRange","parent","hover","Hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","contents","list","CompletionList","isIncomplete","SignatureHelp","asCommands","CodeAction","isPreferred","asSelectionRanges","selectionRanges","ProtocolDocumentLink","SelectionRangeRequest","selectionRangeProvider","provideSelectionRanges","positions","ranges","registerSelectionRangeProvider","vscode","asSemanticTokensEdit","SemanticTokensEdit","deleteCount","Uint32Array","asSemanticTokens","SemanticTokens","resultId","asSemanticTokensEdits","SemanticTokensEdits","asLegend","SemanticTokensRequest","tokenTypes","SemanticTokenTypes","comment","keyword","regexp","operator","namespace","struct","class","interface","enum","typeParameter","function","member","macro","variable","parameter","property","tokenModifiers","SemanticTokenModifiers","declaration","static","abstract","readonly","semanticTokensProvider","documentProvider","provideDocumentSemanticTokens","provideDocumentSemanticTokensEdits","previousResultId","SemanticTokensEditsRequest","rangeProvider","provideDocumentRangeSemanticTokens","SemanticTokensRangeRequest","legend","registerDocumentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","TypeDefinitionRequest","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","thenable","typedArray","check","resolved","isWindows","isMacintosh","isLinux","execFileSync","cmd","__dirname","spawnSync","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","floor","random","_chars","v4","empty","_UUIDPattern","isUUID","test","access","arrayDiff","left","right","filter","DidChangeWorkspaceFoldersNotification","initializeWithFolders","asProtocol","currentWorkspaceFolders","_initialFolders","WorkspaceFoldersRequest","removed","added","doSendEvent","addedFolders","removedFolders","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","sendInitialEvent","NODE_DEBUG","unshift","SEMVER_SPEC_VERSION","MAX_SAFE_INTEGER","re","src","t","tokens","R","tok","n","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULLPLAIN","FULL","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","COERCERTL","RegExp","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","er","TypeError","raw","major","minor","patch","num","build","valid","v","clean","replace","compare","compareMain","comparePre","compareIdentifiers","a","b","compareBuild","inc","release","identifier","diff","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","rcompareIdentifiers","compareLoose","versionA","versionB","rcompare","sort","rsort","parseRange","c","isSatisfiable","comparators","remainingComparators","testComparator","pop","otherComparator","intersects","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","tb","testSet","allowed","outside","hilo","gtfn","ltefn","ltfn","ecomp","high","low","comparator","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","anyX","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","rangeComparators","thisComparator","rangeComparator","toComparators","maxSatisfying","versions","maxSV","rangeObj","minSatisfying","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","coerce","rtl","exec","lastIndex","vscode_jsonrpc_1","callHierarchy","st","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","resultType","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","protocol_progress_1","DocumentFilter","DocumentSelector","pattern","Abort","Transactional","Undo","objectLiteral","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","Log","one","two","three","four","defined","startCharacter","endCharacter","_i","insert","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","MarkedString","SymbolTag","FormattingOptions","TextEditChangeImpl","all","WorkspaceChange","_this","_textEditChanges","_workspaceEdit","textEditChange","enumerable","configurable","getTextEditChange","textDocumentEdit","checkDocumentChanges","fromPlainText","plainText","SourceFixAll","commandOrEdit","TextDocument","EOL","mergeSort","leftIdx","rightIdx","content","FullTextDocument","lineCount","positionAt","offsetAt","applyEdits","sortedEdits","lastModifiedOffset","startOffset","endOffset","substring","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","charAt","offset","mid","lineOffset","nextLineOffset","serverModule","asAbsolutePath","filePath","allModules","readdirSync","withFileTypes","dirent","includes","checkIsTrongateProject","registerProposedFeatures","require","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","d","definition","o","prop","Symbol","toStringTag"],"mappings":"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","file":"extension.js","sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asCallHierarchyItem(converter, item) {\r\n        if (item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new vscode_1.CallHierarchyItem(converter.asSymbolKind(item.kind), item.name, item.detail || '', converter.asUri(item.uri), converter.asRange(item.range), converter.asRange(item.selectionRange));\r\n        if (item.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(item.tags);\r\n        }\r\n        return result;\r\n    }\r\n    protocol2code.asCallHierarchyItem = asCallHierarchyItem;\r\n    function asCallHierarchyItems(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        let result = items.map(item => asCallHierarchyItem(converter, item));\r\n        return result[0];\r\n    }\r\n    protocol2code.asCallHierarchyItems = asCallHierarchyItems;\r\n    function asCallHierarchyIncomingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyIncomingCall(asCallHierarchyItem(converter, item.from), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCall = asCallHierarchyIncomingCall;\r\n    function asCallHierarchyIncomingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyIncomingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyIncomingCalls = asCallHierarchyIncomingCalls;\r\n    function asCallHierarchyOutgoingCall(converter, item) {\r\n        return new vscode_1.CallHierarchyOutgoingCall(asCallHierarchyItem(converter, item.to), converter.asRanges(item.fromRanges));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCall = asCallHierarchyOutgoingCall;\r\n    function asCallHierarchyOutgoingCalls(converter, items) {\r\n        if (items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(item => asCallHierarchyOutgoingCall(converter, item));\r\n    }\r\n    protocol2code.asCallHierarchyOutgoingCalls = asCallHierarchyOutgoingCalls;\r\n})(protocol2code || (protocol2code = {}));\r\nvar code2protocol;\r\n(function (code2protocol) {\r\n    function asCallHierarchyItem(converter, value) {\r\n        const result = {\r\n            name: value.name,\r\n            kind: converter.asSymbolKind(value.kind),\r\n            uri: converter.asUri(value.uri),\r\n            range: converter.asRange(value.range),\r\n            selectionRange: converter.asRange(value.selectionRange)\r\n        };\r\n        if (value.detail !== undefined && value.detail.length > 0) {\r\n            result.detail = value.detail;\r\n        }\r\n        if (value.tags !== undefined) {\r\n            result.tags = converter.asSymbolTags(value.tags);\r\n        }\r\n        return result;\r\n    }\r\n    code2protocol.asCallHierarchyItem = asCallHierarchyItem;\r\n})(code2protocol || (code2protocol = {}));\r\nclass CallHierarchyProvider {\r\n    constructor(client) {\r\n        this.client = client;\r\n        this.middleware = client.clientOptions.middleware;\r\n    }\r\n    prepareCallHierarchy(document, position, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const prepareCallHierarchy = (document, position, token) => {\r\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyItems(this.client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.prepareCallHierarchy\r\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\r\n            : prepareCallHierarchy(document, position, token);\r\n    }\r\n    provideCallHierarchyIncomingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyIncomingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyIncomingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyIncomingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyIncomingCalls\r\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\r\n            : provideCallHierarchyIncomingCalls(item, token);\r\n    }\r\n    provideCallHierarchyOutgoingCalls(item, token) {\r\n        const client = this.client;\r\n        const middleware = this.middleware;\r\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\r\n            const params = {\r\n                item: code2protocol.asCallHierarchyItem(client.code2ProtocolConverter, item)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\r\n                return protocol2code.asCallHierarchyOutgoingCalls(client.protocol2CodeConverter, result);\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.CallHierarchyOutgoingCallsRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        return middleware.provideCallHierarchyOutgingCalls\r\n            ? middleware.provideCallHierarchyOutgingCalls(item, token, provideCallHierarchyOutgoingCalls)\r\n            : provideCallHierarchyOutgoingCalls(item, token);\r\n    }\r\n}\r\nclass CallHierarchyFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.CallHierarchyPrepareRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        const capability = ensure(ensure(capabilites, 'textDocument'), 'callHierarchy');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const client = this._client;\r\n        const provider = new CallHierarchyProvider(client);\r\n        return [vscode_1.languages.registerCallHierarchyProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.CallHierarchyFeature = CallHierarchyFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        onProgress: connection.onProgress,\r\n        sendProgress: connection.sendProgress,\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const selector of this._selectors.values()) {\r\n            if (vscode_1.languages.match(selector, document)) {\r\n                return {\r\n                    send: (data) => {\r\n                        this.callback(data);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n    getProvider(document) {\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, document)) {\r\n                return {\r\n                    send: (event) => {\r\n                        this.callback(event);\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        throw new Error(`No provider available for the given text document`);\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((value) => {\r\n            value.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getRegistration(documentSelector, capability) {\r\n        if (!capability) {\r\n            return [undefined, undefined];\r\n        }\r\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\r\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\r\n            const selector = capability.documentSelector || documentSelector;\r\n            if (selector) {\r\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\r\n            }\r\n        }\r\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\r\n            if (!documentSelector) {\r\n                return [undefined, undefined];\r\n            }\r\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n            return [UUID.generateUuid(), options];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    getRegistrationOptions(documentSelector, capability) {\r\n        if (!documentSelector || !capability) {\r\n            return undefined;\r\n        }\r\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n    }\r\n    getProvider(textDocument) {\r\n        for (const registration of this._registrations.values()) {\r\n            let selector = registration.data.registerOptions.documentSelector;\r\n            if (selector !== null && vscode_1.languages.match(selector, textDocument)) {\r\n                return registration.provider;\r\n            }\r\n        }\r\n        throw new Error(`The feature has no registration for the provided text document ${textDocument.uri.toString()}`);\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._registrations = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        const registration = this.registerLanguageProvider(data.registerOptions);\r\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\r\n    }\r\n    unregister(id) {\r\n        let registration = this._registrations.get(id);\r\n        if (registration !== undefined) {\r\n            registration.disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._registrations.forEach((registration) => {\r\n            registration.disposable.dispose();\r\n        });\r\n        this._registrations.clear();\r\n    }\r\n    getProviders() {\r\n        const result = [];\r\n        for (const registration of this._registrations.values()) {\r\n            result.push(registration.provider);\r\n        }\r\n        return result;\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true,\r\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] }\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const triggerCharacters = options.triggerCharacters || [];\r\n        const provider = {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const middleware = this._client.clientOptions.middleware;\r\n                const provideCompletionItems = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    const client = this._client;\r\n                    const middleware = this._client.clientOptions.middleware;\r\n                    const resolveCompletionItem = (item, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                            return Promise.resolve(item);\r\n                        });\r\n                    };\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCompletionItemProvider(options.documentSelector, provider, ...triggerCharacters), provider];\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideHover: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideHover = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerHoverProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n        config.contextSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSignatureHelp: (document, position, token, context) => {\r\n                const client = this._client;\r\n                const providerSignatureHelp = (document, position, context, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, context, token);\r\n            }\r\n        };\r\n        let disposable;\r\n        if (options.retriggerCharacters === undefined) {\r\n            const triggerCharacters = options.triggerCharacters || [];\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, ...triggerCharacters);\r\n        }\r\n        else {\r\n            const metaData = {\r\n                triggerCharacters: options.triggerCharacters || [],\r\n                retriggerCharacters: options.retriggerCharacters || []\r\n            };\r\n            disposable = vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, provider, metaData);\r\n        }\r\n        return [disposable, provider];\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideReferences: (document, position, options, token) => {\r\n                const client = this._client;\r\n                const _providerReferences = (document, position, options, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\r\n                    : _providerReferences(document, position, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerReferenceProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentHighlights = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\r\n                    : _provideDocumentHighlights(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentSymbols: (document, token) => {\r\n                const client = this._client;\r\n                const _provideDocumentSymbols = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                        if (data === null) {\r\n                            return undefined;\r\n                        }\r\n                        if (data.length === 0) {\r\n                            return [];\r\n                        }\r\n                        else {\r\n                            let element = data[0];\r\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                                return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                            }\r\n                            else {\r\n                                return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                            }\r\n                        }\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\r\n                    : _provideDocumentSymbols(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        const provider = {\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                const client = this._client;\r\n                const provideWorkspaceSymbols = (query, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.isPreferredSupport = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                const client = this._client;\r\n                const _provideCodeActions = (document, range, context, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                        if (values === null) {\r\n                            return undefined;\r\n                        }\r\n                        const result = [];\r\n                        for (let item of values) {\r\n                            if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                                result.push(client.protocol2CodeConverter.asCommand(item));\r\n                            }\r\n                            else {\r\n                                result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                            }\r\n                        }\r\n                        return result;\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\r\n                    : _provideCodeActions(document, range, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerCodeActionsProvider(options.documentSelector, provider, (options.codeActionKinds\r\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n                : undefined)), provider];\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideCodeLenses: (document, token) => {\r\n                const client = this._client;\r\n                const provideCodeLenses = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    const client = this._client;\r\n                    const resolveCodeLens = (codeLens, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                            return codeLens;\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerCodeLensProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentFormattingEdits = (document, options, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                const client = this._client;\r\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        range: client.code2ProtocolConverter.asRange(range),\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                let middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                const client = this._client;\r\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        ch: ch,\r\n                        options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        };\r\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                const client = this._client;\r\n                const provideRenameEdits = (document, position, newName, token) => {\r\n                    let params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        position: client.code2ProtocolConverter.asPosition(position),\r\n                        newName: newName\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                        return Promise.reject(new Error(error.message));\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    const client = this._client;\r\n                    const prepareRename = (document, position, token) => {\r\n                        let params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            position: client.code2ProtocolConverter.asPosition(position),\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                                return client.protocol2CodeConverter.asRange(result);\r\n                            }\r\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\r\n                                return {\r\n                                    range: client.protocol2CodeConverter.asRange(result.range),\r\n                                    placeholder: result.placeholder\r\n                                };\r\n                            }\r\n                            // To cancel the rename vscode API expects a rejected promise.\r\n                            return Promise.reject(new Error(`The element can't be renamed.`));\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                            return Promise.reject(new Error(error.message));\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerRenameProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const documentLinkCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentLink');\r\n        documentLinkCapabilities.dynamicRegistration = true;\r\n        documentLinkCapabilities.tooltipSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDocumentLinks: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentLinks = (document, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                        return Promise.resolve([]);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    const client = this._client;\r\n                    let resolveDocumentLink = (link, token) => {\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                            return Promise.resolve(link);\r\n                        });\r\n                    };\r\n                    const middleware = client.clientOptions.middleware;\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        };\r\n        return [vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        const client = this._client;\r\n        const middleware = client.clientOptions.middleware;\r\n        const executeCommand = (command, args) => {\r\n            let params = {\r\n                command,\r\n                arguments: args\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n            });\r\n        };\r\n        if (data.registerOptions.commands) {\r\n            const disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    return middleware.executeCommand\r\n                        ? middleware.executeCommand(command, args, executeCommand)\r\n                        : executeCommand(command, args);\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onProgress(type, token, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            return this._resolvedConnection.onProgress(type, token, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering progress handler for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendProgress(type, token, value) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendProgress(type, token, value);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending progress for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get traceOutputChannel() {\r\n        if (this._traceOutputChannel) {\r\n            return this._traceOutputChannel;\r\n        }\r\n        return this.outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    warn(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    error(message, data, showNotification = true) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (showNotification && this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    showNotificationMessage() {\r\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\r\n            this.outputChannel.show(true);\r\n        });\r\n    }\r\n    logTrace(message, data) {\r\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message, undefined, false);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message, undefined, false);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            clientInfo: {\r\n                name: 'vscode',\r\n                version: vscode_1.version\r\n            },\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        if (this._clientOptions.progressOnInitialization) {\r\n            const token = UUID.generateUuid();\r\n            const part = new progressPart_1.ProgressPart(connection, token);\r\n            initParams.workDoneToken = token;\r\n            return this.doInitialize(connection, initParams).then((result) => {\r\n                part.done();\r\n                return result;\r\n            }, (error) => {\r\n                part.cancel();\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            return this.doInitialize(connection, initParams);\r\n        }\r\n    }\r\n    doInitialize(connection, initParams) {\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n            throw error;\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp(false);\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this.cleanUpChannel();\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel) {\r\n            this.cleanUpChannel();\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    cleanUpChannel() {\r\n        if (this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        var _a, _b;\r\n        const client = this;\r\n        function didChangeWatchedFile(event) {\r\n            client._fileEvents.push(event);\r\n            client._fileEventDelayer.trigger(() => {\r\n                client.onReady().then(() => {\r\n                    client.resolveConnection().then(connection => {\r\n                        if (client.isConnectionActive()) {\r\n                            client.forceDocumentSync();\r\n                            connection.didChangeWatchedFiles({ changes: client._fileEvents });\r\n                        }\r\n                        client._fileEvents = [];\r\n                    });\r\n                }, (error) => {\r\n                    client.error(`Notify file events failed.`, error);\r\n                });\r\n            });\r\n        }\r\n        const workSpaceMiddleware = (_a = this.clientOptions.middleware) === null || _a === void 0 ? void 0 : _a.workspace;\r\n        ((_b = workSpaceMiddleware) === null || _b === void 0 ? void 0 : _b.didChangeWatchedFile) ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event);\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware;\r\n        if (middleware.handleDiagnostics) {\r\n            middleware.handleDiagnostics(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    getFeature(request) {\r\n        return this._dynamicFeatures.get(request);\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\r\n        diagnostics.relatedInformation = true;\r\n        diagnostics.versionSupport = false;\r\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return Is.asPromise(vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; }));\r\n    }\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel or a content modified don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && (error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.ErrorCodes.ContentModified)) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asCompletionTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asSignatureHelpTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.SignatureHelpTriggerKind.Invoke:\r\n                return proto.SignatureHelpTriggerKind.Invoked;\r\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\r\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\r\n            case code.SignatureHelpTriggerKind.ContentChange:\r\n                return proto.SignatureHelpTriggerKind.ContentChange;\r\n        }\r\n    }\r\n    function asParameterInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label\r\n        };\r\n    }\r\n    function asParameterInformations(values) {\r\n        return values.map(asParameterInformation);\r\n    }\r\n    function asSignatureInformation(value) {\r\n        // We leave the documentation out on purpose since it usually adds no\r\n        // value for the server.\r\n        return {\r\n            label: value.label,\r\n            parameters: asParameterInformations(value.parameters)\r\n        };\r\n    }\r\n    function asSignatureInformations(values) {\r\n        return values.map(asSignatureInformation);\r\n    }\r\n    function asSignatureHelp(value) {\r\n        if (value === undefined) {\r\n            return value;\r\n        }\r\n        return {\r\n            signatures: asSignatureInformations(value.signatures),\r\n            activeSignature: value.activeSignature,\r\n            activeParameter: value.activeParameter\r\n        };\r\n    }\r\n    function asSignatureHelpParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                isRetrigger: context.isRetrigger,\r\n                triggerCharacter: context.triggerCharacter,\r\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\r\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asPositions(value) {\r\n        let result = [];\r\n        for (let elem of value) {\r\n            result.push(asPosition(elem));\r\n        }\r\n        return result;\r\n    }\r\n    function isInsertReplace(value) {\r\n        const candidate = value;\r\n        return candidate && !!candidate.inserting && !!candidate.replacing;\r\n    }\r\n    function asRange(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        // The LSP has no support yet for insert replace. So this can never happen.\r\n        if (isInsertReplace(value)) {\r\n            throw new Error(`Receving unknown insert replace range.`);\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asLocation(value) {\r\n        if (value === undefined || value === null) {\r\n            return value;\r\n        }\r\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case code.DiagnosticTag.Unnecessary:\r\n                return proto.DiagnosticTag.Unnecessary;\r\n            case code.DiagnosticTag.Deprecated:\r\n                return proto.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asRelatedInformation(item) {\r\n        return {\r\n            message: item.message,\r\n            location: asLocation(item.location)\r\n        };\r\n    }\r\n    function asRelatedInformations(items) {\r\n        return items.map(asRelatedInformation);\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (Array.isArray(item.tags)) {\r\n            result.tags = asDiagnosticTags(item.tags);\r\n        }\r\n        if (item.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === undefined || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case code.CompletionItemTag.Deprecated:\r\n                return proto.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined) {\r\n            return tags;\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== undefined) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        const tags = asCompletionItemTags(item.tags);\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== undefined) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\r\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\r\n                    if (index !== -1) {\r\n                        tags.splice(index, 1);\r\n                    }\r\n                }\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        if (tags !== undefined && tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text = undefined;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text !== undefined && range !== undefined) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === undefined || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= code.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return (item + 1);\r\n        }\r\n        return proto.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(item) {\r\n        return item;\r\n    }\r\n    function asSymbolTags(items) {\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === undefined || context === null) {\r\n            return context;\r\n        }\r\n        let only;\r\n        if (context.only && Is.string(context.only.value)) {\r\n            only = [context.only.value];\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        if (item.tooltip !== undefined) {\r\n            result.tooltip = item.tooltip;\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asSignatureHelpParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asPositions,\r\n        asLocation,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideColorPresentations: (color, context, token) => {\r\n                const client = this._client;\r\n                const provideColorPresentations = (color, context, token) => {\r\n                    const requestParams = {\r\n                        color,\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                        range: client.code2ProtocolConverter.asRange(context.range)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                const client = this._client;\r\n                const provideDocumentColors = (document, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerColorProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideDeclaration: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideDeclaration = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerDeclarationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideFoldingRanges: (document, context, token) => {\r\n                const client = this._client;\r\n                const provideFoldingRanges = (document, _, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideImplementation: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideImplementation = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerImplementationProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst selectionRange_1 = require(\"./selectionRange\");\r\nconst progress_1 = require(\"./progress\");\r\nconst callHierarchy_proposed_1 = require(\"./callHierarchy.proposed\");\r\nconst semanticTokens_proposed_1 = require(\"./semanticTokens.proposed\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.41.0'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env, fork) {\r\n            if (!env && !fork) {\r\n                return undefined;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            if (fork) {\r\n                result['ELECTRON_RUN_AS_NODE'] = '1';\r\n                result['ELECTRON_NO_ASAR'] = '1';\r\n            }\r\n            if (env) {\r\n                Object.keys(env).forEach(key => result[key] = env[key]);\r\n            }\r\n            return result;\r\n        }\r\n        const debugStartWith = ['--debug=', '--debug-brk=', '--inspect=', '--inspect-brk='];\r\n        const debugEquals = ['--debug', '--debug-brk', '--inspect', '--inspect-brk'];\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => {\r\n                    return debugStartWith.some(value => arg.startsWith(value)) ||\r\n                        debugEquals.some(value => arg === value);\r\n                });\r\n            }\r\n            return false;\r\n        }\r\n        function assertStdio(process) {\r\n            if (process.stdin === null || process.stdout === null || process.stderr === null) {\r\n                throw new Error('Process created without stdio streams');\r\n            }\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            if (this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env, false);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.env = getEnvironment(options.env, true);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            assertStdio(sp);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                assertStdio(sp);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\r\n        this.registerFeature(new progress_1.ProgressFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(client) {\r\n        let result = [\r\n            new callHierarchy_proposed_1.CallHierarchyFeature(client),\r\n            new semanticTokens_proposed_1.SemanticTokensFeature(client)\r\n        ];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass ProgressFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(capabilities, 'window').workDoneProgress = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        let createHandler = (params) => {\r\n            new progressPart_1.ProgressPart(this._client, params.token);\r\n        };\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\r\n    }\r\n}\r\nexports.ProgressFeature = ProgressFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nclass ProgressPart {\r\n    constructor(_client, _token) {\r\n        this._client = _client;\r\n        this._token = _token;\r\n        this._reported = 0;\r\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\r\n            switch (value.kind) {\r\n                case 'begin':\r\n                    this.begin(value);\r\n                    break;\r\n                case 'report':\r\n                    this.report(value);\r\n                    break;\r\n                case 'end':\r\n                    this.done();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    begin(params) {\r\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\r\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\r\n            this._progress = progress;\r\n            this._infinite = params.percentage === undefined;\r\n            this._cancellationToken = cancellationToken;\r\n            this._cancellationToken.onCancellationRequested(() => {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\r\n            });\r\n            this.report(params);\r\n            return new Promise((resolve, reject) => {\r\n                this._resolve = resolve;\r\n                this._reject = reject;\r\n            });\r\n        });\r\n    }\r\n    report(params) {\r\n        if (this._infinite && Is.string(params.message)) {\r\n            this._progress.report({ message: params.message });\r\n        }\r\n        else if (Is.number(params.percentage)) {\r\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\r\n            let delta = Math.max(0, percentage - this._reported);\r\n            this._progress.report({ message: params.message, increment: delta });\r\n            this._reported += delta;\r\n        }\r\n    }\r\n    cancel() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._reject) {\r\n            this._reject();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n    done() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._resolve) {\r\n            this._resolve();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProgressPart = ProgressPart;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        if (Array.isArray(diagnostic.tags)) {\r\n            result.tags = asDiagnosticTags(diagnostic.tags);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case ls.DiagnosticTag.Unnecessary:\r\n                return code.DiagnosticTag.Unnecessary;\r\n            case ls.DiagnosticTag.Deprecated:\r\n                return code.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asRanges(value) {\r\n        return value.map(value => asRange(value));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === undefined || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItemTag(tag) {\r\n        switch (tag) {\r\n            case ls.CompletionItemTag.Deprecated:\r\n                return code.CompletionItemTag.Deprecated;\r\n        }\r\n        return undefined;\r\n    }\r\n    function asCompletionItemTags(tags) {\r\n        if (tags === undefined || tags === null) {\r\n            return [];\r\n        }\r\n        const result = [];\r\n        for (let tag of tags) {\r\n            const converted = asCompletionItemTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let tags = asCompletionItemTags(item.tags);\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n            if (item.deprecated === true) {\r\n                tags.push(code.CompletionItemTag.Deprecated);\r\n            }\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== undefined) {\r\n            result.data = item.data;\r\n        }\r\n        if (tags.length > 0) {\r\n            result.tags = tags;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n        if (!result.targetSelectionRange) {\r\n            throw new Error(`targetSelectionRange must not be undefined or null`);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolTag(value) {\r\n        return value;\r\n    }\r\n    function asSymbolTags(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(asSymbolTag);\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === undefined || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== undefined && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === undefined || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === undefined || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== undefined) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.isPreferred !== undefined) {\r\n            result.isPreferred = item.isPreferred;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.tooltip !== undefined) {\r\n            link.tooltip = item.tooltip;\r\n        }\r\n        if (item.data !== undefined && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asSelectionRange(selectionRange) {\r\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\r\n    }\r\n    function asSelectionRanges(selectionRanges) {\r\n        if (!Array.isArray(selectionRanges)) {\r\n            return [];\r\n        }\r\n        let result = [];\r\n        for (let range of selectionRanges) {\r\n            result.push(asSelectionRange(range));\r\n        }\r\n        return result;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asRanges,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolKind,\r\n        asSymbolTag,\r\n        asSymbolTags,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations,\r\n        asSelectionRange,\r\n        asSelectionRanges\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = Object.create(null);\r\n    }\r\n    return target[key];\r\n}\r\nclass SelectionRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'selectionRange');\r\n        capability.dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideSelectionRanges: (document, positions, token) => {\r\n                const client = this._client;\r\n                const provideSelectionRanges = (document, positions, token) => {\r\n                    const requestParams = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                        positions: client.code2ProtocolConverter.asPositions(positions)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => client.protocol2CodeConverter.asSelectionRanges(ranges), (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideSelectionRanges\r\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\r\n                    : provideSelectionRanges(document, positions, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerSelectionRangeProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.SelectionRangeFeature = SelectionRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode = require(\"vscode\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar protocol2code;\r\n(function (protocol2code) {\r\n    function asSemanticTokens(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokens(new Uint32Array(value.data), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokens = asSemanticTokens;\r\n    function asSemanticTokensEdit(value) {\r\n        return new vscode.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\r\n    }\r\n    protocol2code.asSemanticTokensEdit = asSemanticTokensEdit;\r\n    function asSemanticTokensEdits(value) {\r\n        if (value === undefined || value === null) {\r\n            return undefined;\r\n        }\r\n        return new vscode.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\r\n    }\r\n    protocol2code.asSemanticTokensEdits = asSemanticTokensEdits;\r\n    function asLegend(value) {\r\n        return value;\r\n    }\r\n    protocol2code.asLegend = asLegend;\r\n})(protocol2code || (protocol2code = {}));\r\nclass SemanticTokensFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type);\r\n    }\r\n    fillClientCapabilities(cap) {\r\n        const capabilites = cap;\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'semanticTokens');\r\n        capability.dynamicRegistration = true;\r\n        capability.tokenTypes = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.comment,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.keyword,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.number,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.regexp,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.operator,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.namespace,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.type,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.struct,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.class,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.interface,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.enum,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.typeParameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.function,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.member,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.macro,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.variable,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.parameter,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.property,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenTypes.label\r\n        ];\r\n        capability.tokenModifiers = [\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.declaration,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.documentation,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.static,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.abstract,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.deprecated,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.async,\r\n            vscode_languageserver_protocol_1.Proposed.SemanticTokenModifiers.readonly\r\n        ];\r\n    }\r\n    initialize(cap, documentSelector) {\r\n        const capabilities = cap;\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const hasEditProvider = options.documentProvider !== undefined && typeof options.documentProvider !== 'boolean' && options.documentProvider.edits === true;\r\n        const documentProvider = {\r\n            provideDocumentSemanticTokens: (document, token) => {\r\n                const client = this._client;\r\n                const middleware = client.clientOptions.middleware;\r\n                const provideDocumentSemanticTokens = (document, token) => {\r\n                    const params = {\r\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, params, token).then((result) => {\r\n                        return protocol2code.asSemanticTokens(result);\r\n                    }, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRequest.type, error);\r\n                        return undefined;\r\n                    });\r\n                };\r\n                return middleware.provideDocumentSemanticTokens\r\n                    ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\r\n                    : provideDocumentSemanticTokens(document, token);\r\n            },\r\n            provideDocumentSemanticTokensEdits: hasEditProvider\r\n                ? (document, previousResultId, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            previousResultId\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, params, token).then((result) => {\r\n                            if (vscode_languageserver_protocol_1.Proposed.SemanticTokens.is(result)) {\r\n                                return protocol2code.asSemanticTokens(result);\r\n                            }\r\n                            else {\r\n                                return protocol2code.asSemanticTokensEdits(result);\r\n                            }\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensEditsRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentSemanticTokensEdits\r\n                        ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\r\n                        : provideDocumentSemanticTokensEdits(document, previousResultId, token);\r\n                }\r\n                : undefined\r\n        };\r\n        const hasRangeProvider = options.rangeProvider === true;\r\n        const rangeProvider = hasRangeProvider\r\n            ? {\r\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\r\n                    const client = this._client;\r\n                    const middleware = client.clientOptions.middleware;\r\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\r\n                        const params = {\r\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                            range: client.code2ProtocolConverter.asRange(range)\r\n                        };\r\n                        return client.sendRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, params, token).then((result) => {\r\n                            return protocol2code.asSemanticTokens(result);\r\n                        }, (error) => {\r\n                            client.logFailedRequest(vscode_languageserver_protocol_1.Proposed.SemanticTokensRangeRequest.type, error);\r\n                            return undefined;\r\n                        });\r\n                    };\r\n                    return middleware.provideDocumentRangeSemanticTokens\r\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\r\n                        : provideDocumentRangeSemanticTokens(document, range, token);\r\n                }\r\n            }\r\n            : undefined;\r\n        const disposables = [];\r\n        const legend = protocol2code.asLegend(options.legend);\r\n        disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(options.documentSelector, documentProvider, legend));\r\n        if (rangeProvider !== undefined) {\r\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(options.documentSelector, rangeProvider, legend));\r\n        }\r\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { document: documentProvider, range: rangeProvider }];\r\n    }\r\n}\r\nexports.SemanticTokensFeature = SemanticTokensFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        const provider = {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                const client = this._client;\r\n                const provideTypeDefinition = (document, position, token) => {\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                        return Promise.resolve(null);\r\n                    });\r\n                };\r\n                const middleware = client.clientOptions.middleware;\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        };\r\n        return [vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, provider), provider];\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\nfunction asPromise(value) {\r\n    if (value instanceof Promise) {\r\n        return value;\r\n    }\r\n    else if (thenable(value)) {\r\n        return new Promise((resolve, reject) => {\r\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\r\n        });\r\n    }\r\n    else {\r\n        return Promise.resolve(value);\r\n    }\r\n}\r\nexports.asPromise = asPromise;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nfunction arrayDiff(left, right) {\r\n    return left.filter(element => right.indexOf(element) < 0);\r\n}\r\nexports.arrayDiff = arrayDiff;\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        this.initializeWithFolders(folders);\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    initializeWithFolders(currentWorkspaceFolders) {\r\n        this._initialFolders = currentWorkspaceFolders;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    sendInitialEvent(currentWorkspaceFolders) {\r\n        if (this._initialFolders && currentWorkspaceFolders) {\r\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\r\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\r\n            if (added.length > 0 || removed.length > 0) {\r\n                this.doSendEvent(added, removed);\r\n            }\r\n        }\r\n        else if (this._initialFolders) {\r\n            this.doSendEvent([], this._initialFolders);\r\n        }\r\n        else if (currentWorkspaceFolders) {\r\n            this.doSendEvent(currentWorkspaceFolders, []);\r\n        }\r\n    }\r\n    doSendEvent(addedFolders, removedFolders) {\r\n        let params = {\r\n            event: {\r\n                added: addedFolders.map(folder => this.asProtocol(folder)),\r\n                removed: removedFolders.map(folder => this.asProtocol(folder))\r\n            }\r\n        };\r\n        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                this.doSendEvent(event.added, event.removed);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar t = exports.tokens = {}\nvar R = 0\n\nfunction tok (n) {\n  t[n] = R++\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ntok('NUMERICIDENTIFIER')\nsrc[t.NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\ntok('NUMERICIDENTIFIERLOOSE')\nsrc[t.NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ntok('NONNUMERICIDENTIFIER')\nsrc[t.NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ntok('MAINVERSION')\nsrc[t.MAINVERSION] = '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')'\n\ntok('MAINVERSIONLOOSE')\nsrc[t.MAINVERSIONLOOSE] = '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ntok('PRERELEASEIDENTIFIER')\nsrc[t.PRERELEASEIDENTIFIER] = '(?:' + src[t.NUMERICIDENTIFIER] +\n                            '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\ntok('PRERELEASEIDENTIFIERLOOSE')\nsrc[t.PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[t.NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ntok('PRERELEASE')\nsrc[t.PRERELEASE] = '(?:-(' + src[t.PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[t.PRERELEASEIDENTIFIER] + ')*))'\n\ntok('PRERELEASELOOSE')\nsrc[t.PRERELEASELOOSE] = '(?:-?(' + src[t.PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[t.PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ntok('BUILDIDENTIFIER')\nsrc[t.BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ntok('BUILD')\nsrc[t.BUILD] = '(?:\\\\+(' + src[t.BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[t.BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ntok('FULL')\ntok('FULLPLAIN')\nsrc[t.FULLPLAIN] = 'v?' + src[t.MAINVERSION] +\n                  src[t.PRERELEASE] + '?' +\n                  src[t.BUILD] + '?'\n\nsrc[t.FULL] = '^' + src[t.FULLPLAIN] + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ntok('LOOSEPLAIN')\nsrc[t.LOOSEPLAIN] = '[v=\\\\s]*' + src[t.MAINVERSIONLOOSE] +\n                  src[t.PRERELEASELOOSE] + '?' +\n                  src[t.BUILD] + '?'\n\ntok('LOOSE')\nsrc[t.LOOSE] = '^' + src[t.LOOSEPLAIN] + '$'\n\ntok('GTLT')\nsrc[t.GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ntok('XRANGEIDENTIFIERLOOSE')\nsrc[t.XRANGEIDENTIFIERLOOSE] = src[t.NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\ntok('XRANGEIDENTIFIER')\nsrc[t.XRANGEIDENTIFIER] = src[t.NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\ntok('XRANGEPLAIN')\nsrc[t.XRANGEPLAIN] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[t.PRERELEASE] + ')?' +\n                   src[t.BUILD] + '?' +\n                   ')?)?'\n\ntok('XRANGEPLAINLOOSE')\nsrc[t.XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[t.PRERELEASELOOSE] + ')?' +\n                        src[t.BUILD] + '?' +\n                        ')?)?'\n\ntok('XRANGE')\nsrc[t.XRANGE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAIN] + '$'\ntok('XRANGELOOSE')\nsrc[t.XRANGELOOSE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ntok('COERCE')\nsrc[t.COERCE] = '(^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\ntok('COERCERTL')\nre[t.COERCERTL] = new RegExp(src[t.COERCE], 'g')\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ntok('LONETILDE')\nsrc[t.LONETILDE] = '(?:~>?)'\n\ntok('TILDETRIM')\nsrc[t.TILDETRIM] = '(\\\\s*)' + src[t.LONETILDE] + '\\\\s+'\nre[t.TILDETRIM] = new RegExp(src[t.TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\ntok('TILDE')\nsrc[t.TILDE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAIN] + '$'\ntok('TILDELOOSE')\nsrc[t.TILDELOOSE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ntok('LONECARET')\nsrc[t.LONECARET] = '(?:\\\\^)'\n\ntok('CARETTRIM')\nsrc[t.CARETTRIM] = '(\\\\s*)' + src[t.LONECARET] + '\\\\s+'\nre[t.CARETTRIM] = new RegExp(src[t.CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\ntok('CARET')\nsrc[t.CARET] = '^' + src[t.LONECARET] + src[t.XRANGEPLAIN] + '$'\ntok('CARETLOOSE')\nsrc[t.CARETLOOSE] = '^' + src[t.LONECARET] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ntok('COMPARATORLOOSE')\nsrc[t.COMPARATORLOOSE] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.LOOSEPLAIN] + ')$|^$'\ntok('COMPARATOR')\nsrc[t.COMPARATOR] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.FULLPLAIN] + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ntok('COMPARATORTRIM')\nsrc[t.COMPARATORTRIM] = '(\\\\s*)' + src[t.GTLT] +\n                      '\\\\s*(' + src[t.LOOSEPLAIN] + '|' + src[t.XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[t.COMPARATORTRIM] = new RegExp(src[t.COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ntok('HYPHENRANGE')\nsrc[t.HYPHENRANGE] = '^\\\\s*(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\ntok('HYPHENRANGELOOSE')\nsrc[t.HYPHENRANGELOOSE] = '^\\\\s*(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\ntok('STAR')\nsrc[t.STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[t.LOOSE] : re[t.FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\nSemVer.prototype.compareBuild = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  var i = 0\n  do {\n    var a = this.build[i]\n    var b = other.build[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.compareBuild = compareBuild\nfunction compareBuild (a, b, loose) {\n  var versionA = new SemVer(a, loose)\n  var versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(b, a, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1] !== undefined ? m[1] : ''\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY || version === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    if (this.value === '') {\n      return true\n    }\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    if (comp.value === '') {\n      return true\n    }\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return (\n      isSatisfiable(thisComparators, options) &&\n      range.set.some(function (rangeComparators) {\n        return (\n          isSatisfiable(rangeComparators, options) &&\n          thisComparators.every(function (thisComparator) {\n            return rangeComparators.every(function (rangeComparator) {\n              return thisComparator.intersects(rangeComparator, options)\n            })\n          })\n        )\n      })\n    )\n  })\n}\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nfunction isSatisfiable (comparators, options) {\n  var result = true\n  var remainingComparators = comparators.slice()\n  var testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every(function (otherComparator) {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p + pr\n    } else if (xm) {\n      ret = '>=' + M + '.0.0' + pr + ' <' + (+M + 1) + '.0.0' + pr\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0' + pr +\n        ' <' + M + '.' + (+m + 1) + '.0' + pr\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version, options) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  var match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    var next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n      (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n          next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(match[2] +\n    '.' + (match[3] || '0') +\n    '.' + (match[4] || '0'), options)\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n\r\nimport * as path from 'path';\r\nimport {readdirSync} from 'fs';\r\nimport { workspace, ExtensionContext, TextDocument, OutputChannel, WorkspaceFolder, Uri, window, StatusBarItem } from 'vscode';\r\n\r\n\r\nimport {\r\n\tLanguageClient,\r\n\tLanguageClientOptions,\r\n\tServerOptions,\r\n\tTransportKind\r\n} from 'vscode-languageclient';\r\n\r\nlet client: LanguageClient;\r\n\r\nexport function activate(context: ExtensionContext) {\r\n\t// The server is implemented in node\r\n\tlet serverModule = context.asAbsolutePath(\r\n\t\tpath.join('server', 'out', 'server.js')\r\n\t);\r\n\r\n\tlet outputChannel: OutputChannel = window.createOutputChannel('languageServerExample');\r\n\t// The debug options for the server\r\n\t// --inspect=6009: runs the server in Node's Inspector mode so VS Code can attach to the server for debugging\r\n\tlet debugOptions = { execArgv: ['--nolazy', '--inspect=6009'] };\r\n\r\n\t// If the extension is launched in debug mode then the debug server options are used\r\n\t// Otherwise the run options are used\r\n\tlet serverOptions: ServerOptions = {\r\n\t\trun: { module: serverModule, transport: TransportKind.ipc },\r\n\t\tdebug: {\r\n\t\t\tmodule: serverModule,\r\n\t\t\ttransport: TransportKind.ipc,\r\n\t\t\toptions: debugOptions\r\n\t\t}\r\n\t};\r\n\r\n\t// Options to control the language client\r\n\tlet clientOptions: LanguageClientOptions = {\r\n\t\t// Register the server for plain text documents\r\n\t\tdocumentSelector: [{ scheme: 'file', language: 'php' }],\r\n\t\tsynchronize: {\r\n\t\t\t// Notify the server about file changes to '.clientrc files contained in the workspace\r\n\t\t\tfileEvents: workspace.createFileSystemWatcher('**/.clientrc')\r\n\t\t},\r\n\t\t// workspaceFolder: folder,\r\n\t\toutputChannel: outputChannel,\r\n\r\n\t};\r\n\r\n\t// Create the language client and start the client.\r\n\tclient = new LanguageClient(\r\n\t\t'languageServerExample',\r\n\t\t'Language Server Example',\r\n\t\tserverOptions,\r\n\t\tclientOptions\r\n\t);\r\n\r\n\t// Start the client. This will also launch the server\r\n\tconst fsPath =workspace.workspaceFolders[0].uri.fsPath\r\n\tconst isTrongateProject = checkIsTrongateProject(fsPath)\r\n\tif(isTrongateProject) {\r\n\t\tclient.registerProposedFeatures();\r\n\t\tclient.start();\r\n\t\tclient.onReady().then(() => {\r\n\t\t\tconsole.log('ok, it is on')\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport function deactivate(): Thenable<void> | undefined {\r\n\tif (!client) {\r\n\t\treturn undefined;\r\n\t}\r\n\treturn client.stop();\r\n}\r\n\r\nfunction getAllTheModuleFolders(pathStr) {\r\n\tconst filePath = pathStr\r\n\tconst isTrongateProject = checkIsTrongateProject(filePath)\r\n\tif (isTrongateProject) {\r\n\t\treturn getDirectories(filePath + '/modules')\r\n\t} else {\r\n\t\treturn []\r\n\t}\r\n}\r\n\r\nconst getDirectories = source =>\r\n  readdirSync(source, { withFileTypes: true })\r\n    .filter(dirent => dirent.isDirectory())\r\n    .map(dirent => dirent.name)\r\n\r\nfunction checkIsTrongateProject(filePath) {\r\n\tconst allModules = getDirectories(filePath)\r\n\tconst TRONGATE_FILE_REQUIREMENT = ['config', 'engine', 'modules', 'public', 'templates']\r\n\tconst result = TRONGATE_FILE_REQUIREMENT.every(item => allModules.includes(item)) \r\n\treturn result;\r\n\t// console.log('Is this a trongate module?')\r\n\t// console.log(result)\r\n\t// console.log(allModules)\r\n}","module.exports = require(\"child_process\");;","module.exports = require(\"crypto\");;","module.exports = require(\"fs\");;","module.exports = require(\"net\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"vscode\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(4839);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}